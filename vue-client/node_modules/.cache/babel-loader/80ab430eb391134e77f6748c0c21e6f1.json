{"remainingRequest":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/babel-loader/lib/index.js!/home/spineor/Downloads/aelis4-web/vue-client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/spineor/Downloads/aelis4-web/vue-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/spineor/Downloads/aelis4-web/vue-client/src/views/layout/components/Sidebar/SidebarItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/spineor/Downloads/aelis4-web/vue-client/src/views/layout/components/Sidebar/SidebarItem.vue","mtime":1564463888672},{"path":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _defineProperty from \"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters } from 'vuex';\nimport validator from 'validator';\nimport path from 'path';\nimport Item from \"./Item\";\nimport AppLink from \"./Link\";\nexport default {\n  name: 'SidebarItem',\n  components: {\n    Item: Item,\n    AppLink: AppLink\n  },\n  props: {\n    // route object\n    item: {\n      type: Object,\n      required: true\n    },\n    isNest: {\n      type: Boolean,\n      default: false\n    },\n    basePath: {\n      type: String,\n      default: ''\n    }\n  },\n  computed: _objectSpread({}, mapGetters(['user']), {\n    children: function children() {\n      var _this = this;\n\n      return this.item.children.filter(function (child) {\n        return _this.hasRoles(child);\n      });\n    }\n  }),\n  data: function data() {\n    return {\n      onlyOneChild: null\n    };\n  },\n  methods: {\n    hasOneShowingChild: function hasOneShowingChild(children, parent) {\n      var _this2 = this;\n\n      var showingChildren = children.filter(function (item) {\n        if (item.hidden) {\n          return false;\n        } // Temp set(will be used if only has one showing child)\n\n\n        _this2.onlyOneChild = item;\n        return true;\n      }); // When there is only one child router, the child router is displayed by default\n\n      if (showingChildren.length === 1) {\n        return true;\n      } // Show parent if there are no child router to display\n\n\n      if (showingChildren.length === 0) {\n        this.onlyOneChild = _objectSpread({}, parent, {\n          path: '',\n          noShowingChildren: true\n        });\n        return true;\n      }\n\n      return false;\n    },\n    resolvePath: function resolvePath(routePath) {\n      if (this.isExternalLink(routePath)) {\n        return routePath;\n      }\n\n      return path.resolve(this.basePath, routePath);\n    },\n    isExternalLink: function isExternalLink(routePath) {\n      return validator.isURL(routePath);\n    },\n    hasRoles: function hasRoles(item) {\n      var _this3 = this;\n\n      var routeRequiredRoles = (item.meta || {}).roles || [];\n      return routeRequiredRoles.length && routeRequiredRoles.some(function (role) {\n        return _this3.user.roles.includes(role);\n      });\n    },\n    isVisible: function isVisible() {\n      return !this.item.hidden && this.item.children && this.hasRoles(this.item);\n    }\n  }\n};",{"version":3,"sources":["SidebarItem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA,SAAA,UAAA,QAAA,MAAA;AACA,OAAA,SAAA,MAAA,WAAA;AACA,OAAA,IAAA,MAAA,MAAA;AACA,OAAA,IAAA;AACA,OAAA,OAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,UAAA,EAAA;AAAA,IAAA,IAAA,EAAA,IAAA;AAAA,IAAA,OAAA,EAAA;AAAA,GAFA;AAGA,EAAA,KAAA,EAAA;AACA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KAFA;AAMA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KANA;AAUA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AAVA,GAHA;AAkBA,EAAA,QAAA,oBACA,UAAA,CAAA,CACA,MADA,CAAA,CADA;AAIA,IAAA,QAJA,sBAIA;AAAA;;AACA,aAAA,KAAA,IAAA,CAAA,QAAA,CAAA,MAAA,CAAA,UAAA,KAAA;AAAA,eAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA;AAAA,OAAA,CAAA;AACA;AANA,IAlBA;AA0BA,EAAA,IA1BA,kBA0BA;AACA,WAAA;AACA,MAAA,YAAA,EAAA;AADA,KAAA;AAGA,GA9BA;AA+BA,EAAA,OAAA,EAAA;AACA,IAAA,kBADA,8BACA,QADA,EACA,MADA,EACA;AAAA;;AACA,UAAA,eAAA,GAAA,QAAA,CAAA,MAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,CAAA,MAAA,EAAA;AACA,iBAAA,KAAA;AACA,SAHA,CAIA;;;AACA,QAAA,MAAA,CAAA,YAAA,GAAA,IAAA;AACA,eAAA,IAAA;AACA,OAPA,CAAA,CADA,CAUA;;AACA,UAAA,eAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,eAAA,IAAA;AACA,OAbA,CAeA;;;AACA,UAAA,eAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,aAAA,YAAA,qBAAA,MAAA;AAAA,UAAA,IAAA,EAAA,EAAA;AAAA,UAAA,iBAAA,EAAA;AAAA;AACA,eAAA,IAAA;AACA;;AAEA,aAAA,KAAA;AACA,KAvBA;AAwBA,IAAA,WAxBA,uBAwBA,SAxBA,EAwBA;AACA,UAAA,KAAA,cAAA,CAAA,SAAA,CAAA,EAAA;AACA,eAAA,SAAA;AACA;;AACA,aAAA,IAAA,CAAA,OAAA,CAAA,KAAA,QAAA,EAAA,SAAA,CAAA;AACA,KA7BA;AA8BA,IAAA,cA9BA,0BA8BA,SA9BA,EA8BA;AACA,aAAA,SAAA,CAAA,KAAA,CAAA,SAAA,CAAA;AACA,KAhCA;AAiCA,IAAA,QAjCA,oBAiCA,IAjCA,EAiCA;AAAA;;AACA,UAAA,kBAAA,GAAA,CAAA,IAAA,CAAA,IAAA,IAAA,EAAA,EAAA,KAAA,IAAA,EAAA;AACA,aAAA,kBAAA,CAAA,MAAA,IAAA,kBAAA,CAAA,IAAA,CAAA,UAAA,IAAA;AAAA,eAAA,MAAA,CAAA,IAAA,CAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA;AAAA,OAAA,CAAA;AACA,KApCA;AAqCA,IAAA,SArCA,uBAqCA;AACA,aAAA,CAAA,KAAA,IAAA,CAAA,MAAA,IAAA,KAAA,IAAA,CAAA,QAAA,IACA,KAAA,QAAA,CAAA,KAAA,IAAA,CADA;AAEA;AAxCA;AA/BA,CAAA","sourcesContent":["<template>\n  <div v-if=\"isVisible()\" class=\"menu-wrapper\">\n    <template\n      v-if=\"hasOneShowingChild(item.children,item) && (!onlyOneChild.children||onlyOneChild.noShowingChildren)&&!item.alwaysShow\"\n    >\n      <app-link :to=\"resolvePath(onlyOneChild.path)\">\n        <el-menu-item\n          :index=\"resolvePath(onlyOneChild.path)\"\n          :class=\"{'submenu-title-noDropdown':!isNest}\"\n        >\n          <item\n            v-if=\"onlyOneChild.meta\"\n            :icon=\"onlyOneChild.meta.icon||item.meta.icon\"\n            :title=\"$t('route.' + onlyOneChild.meta.title)\"\n          />\n        </el-menu-item>\n      </app-link>\n    </template>\n\n    <el-submenu v-else :index=\"resolvePath(item.path)\">\n      <template slot=\"title\">\n        <item v-if=\"item.meta\" :icon=\"item.meta.icon\" :title=\"$t('route.' + item.meta.title)\" />\n      </template>\n\n      <template v-for=\"child in children\">\n        <sidebar-item\n          v-if=\"child.children&&child.children.length>0\"\n          :is-nest=\"true\"\n          :item=\"child\"\n          :key=\"child.path\"\n          :base-path=\"resolvePath(child.path)\"\n          class=\"nest-menu\"\n        />\n        <app-link v-else :to=\"resolvePath(child.path)\" :key=\"child.name\">\n          <el-menu-item :index=\"resolvePath(child.path)\">\n            <item\n              v-if=\"child.meta\"\n              :icon=\"child.meta.icon\"\n              :title=\"$t('route.' + child.meta.title)\"\n            />\n          </el-menu-item>\n        </app-link>\n      </template>\n    </el-submenu>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport validator from 'validator';\nimport path from 'path';\nimport Item from './Item';\nimport AppLink from './Link';\n\nexport default {\n  name: 'SidebarItem',\n  components: { Item, AppLink },\n  props: {\n    // route object\n    item: {\n      type: Object,\n      required: true\n    },\n    isNest: {\n      type: Boolean,\n      default: false\n    },\n    basePath: {\n      type: String,\n      default: ''\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'user'\n    ]),\n    children() {\n      return this.item.children.filter(child => this.hasRoles(child));\n    }\n  },\n  data() {\n    return {\n      onlyOneChild: null\n    };\n  },\n  methods: {\n    hasOneShowingChild(children, parent) {\n      const showingChildren = children.filter((item) => {\n        if (item.hidden) {\n          return false;\n        }\n        // Temp set(will be used if only has one showing child)\n        this.onlyOneChild = item;\n        return true;\n      });\n\n      // When there is only one child router, the child router is displayed by default\n      if (showingChildren.length === 1) {\n        return true;\n      }\n\n      // Show parent if there are no child router to display\n      if (showingChildren.length === 0) {\n        this.onlyOneChild = { ...parent, path: '', noShowingChildren: true };\n        return true;\n      }\n\n      return false;\n    },\n    resolvePath(routePath) {\n      if (this.isExternalLink(routePath)) {\n        return routePath;\n      }\n      return path.resolve(this.basePath, routePath);\n    },\n    isExternalLink(routePath) {\n      return validator.isURL(routePath);\n    },\n    hasRoles(item) {\n      const routeRequiredRoles = (item.meta || {}).roles || [];\n      return routeRequiredRoles.length && routeRequiredRoles.some(role => this.user.roles.includes(role));\n    },\n    isVisible() {\n      return (!this.item.hidden && this.item.children)\n        && this.hasRoles(this.item);\n    }\n  }\n};\n</script>\n"],"sourceRoot":"src/views/layout/components/Sidebar"}]}