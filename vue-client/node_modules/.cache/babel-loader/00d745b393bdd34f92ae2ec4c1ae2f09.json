{"remainingRequest":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/thread-loader/dist/cjs.js!/home/spineor/Downloads/aelis4-web/vue-client/node_modules/babel-loader/lib/index.js!/home/spineor/Downloads/aelis4-web/vue-client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/spineor/Downloads/aelis4-web/vue-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/spineor/Downloads/aelis4-web/vue-client/src/views/warehouse/uploadXml/UploadDrop.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/spineor/Downloads/aelis4-web/vue-client/src/views/warehouse/uploadXml/UploadDrop.vue","mtime":1566984596000},{"path":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.function.name\";\nimport _defineProperty from \"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters } from 'vuex';\nimport authService from '@/utils/auth/auth0Service';\nexport default {\n  name: 'UploadDrop',\n  computed: _objectSpread({}, mapGetters(['user'])),\n  data: function data() {\n    return {\n      isMinimized: false,\n      uploadProgress: 0,\n      processing: false,\n      actualFileProcessed: false,\n      url: '',\n      templateExampleUrl: '',\n      authorization: null\n    };\n  },\n  mounted: function mounted() {\n    this.url = \"\".concat(process.env.VUE_APP_BASE_API, \"/data-entry/shipment/upload\");\n    this.templateExampleUrl = \"\".concat(process.env.VUE_APP_BUCKET_ROOT, \"xml-upload-template.xml\");\n    this.authorization = \"Bearer \".concat(authService.accessToken);\n  },\n  methods: {\n    handleSuccess: function handleSuccess(response, file) {\n      this.$store.dispatch('SetUploadXmlResponse', _objectSpread({}, response, {\n        fileName: file.name\n      }));\n      this.isMinimized = true;\n      this.processing = false;\n      this.actualFileProcessed = true;\n      this.$refs.upload.clearFiles();\n    },\n    handleOpenSearchFile: function handleOpenSearchFile() {\n      this.isMinimized = false;\n      this.uploadProgress = 0;\n    },\n    handleMinimized: function handleMinimized() {\n      this.isMinimized = !this.isMinimized;\n    },\n    handleProgress: function handleProgress(event, file, fileList) {\n      if (!this.processing) {\n        this.processing = true;\n      }\n\n      this.uploadProgress = fileList[0].percentage;\n    },\n    handleError: function handleError(error) {\n      this.processing = false;\n      var message = JSON.parse(error.message);\n      this.$message.error(message.message || this.$t('common.errorServer'));\n    },\n    handleBeforeUpload: function handleBeforeUpload(file) {\n      var isXML = file.type === 'text/xml';\n      var isLt5M = file.size / 1024 / 1024 <= 5;\n\n      if (!isXML) {\n        this.$message.error(this.$t('uploadXmlFiles.errorExtension'));\n      }\n\n      if (!isLt5M) {\n        this.$message.error(this.$t('uploadXmlFiles.fileSizeExceed'));\n      }\n\n      return isXML && isLt5M;\n    }\n  }\n};",{"version":3,"sources":["UploadDrop.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA,SAAA,UAAA,QAAA,MAAA;AACA,OAAA,WAAA,MAAA,2BAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,QAAA,oBACA,UAAA,CAAA,CACA,MADA,CAAA,CADA,CAFA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,KADA;AAEA,MAAA,cAAA,EAAA,CAFA;AAGA,MAAA,UAAA,EAAA,KAHA;AAIA,MAAA,mBAAA,EAAA,KAJA;AAKA,MAAA,GAAA,EAAA,EALA;AAMA,MAAA,kBAAA,EAAA,EANA;AAOA,MAAA,aAAA,EAAA;AAPA,KAAA;AASA,GAjBA;AAkBA,EAAA,OAlBA,qBAkBA;AACA,SAAA,GAAA,aAAA,OAAA,CAAA,GAAA,CAAA,gBAAA;AACA,SAAA,kBAAA,aAAA,OAAA,CAAA,GAAA,CAAA,mBAAA;AACA,SAAA,aAAA,oBAAA,WAAA,CAAA,WAAA;AACA,GAtBA;AAuBA,EAAA,OAAA,EAAA;AACA,IAAA,aADA,yBACA,QADA,EACA,IADA,EACA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,sBAAA,oBAAA,QAAA;AAAA,QAAA,QAAA,EAAA,IAAA,CAAA;AAAA;AACA,WAAA,WAAA,GAAA,IAAA;AACA,WAAA,UAAA,GAAA,KAAA;AACA,WAAA,mBAAA,GAAA,IAAA;AACA,WAAA,KAAA,CAAA,MAAA,CAAA,UAAA;AACA,KAPA;AAQA,IAAA,oBARA,kCAQA;AACA,WAAA,WAAA,GAAA,KAAA;AACA,WAAA,cAAA,GAAA,CAAA;AACA,KAXA;AAYA,IAAA,eAZA,6BAYA;AACA,WAAA,WAAA,GAAA,CAAA,KAAA,WAAA;AACA,KAdA;AAeA,IAAA,cAfA,0BAeA,KAfA,EAeA,IAfA,EAeA,QAfA,EAeA;AACA,UAAA,CAAA,KAAA,UAAA,EAAA;AACA,aAAA,UAAA,GAAA,IAAA;AACA;;AACA,WAAA,cAAA,GAAA,QAAA,CAAA,CAAA,CAAA,CAAA,UAAA;AACA,KApBA;AAqBA,IAAA,WArBA,uBAqBA,KArBA,EAqBA;AACA,WAAA,UAAA,GAAA,KAAA;AACA,UAAA,OAAA,GAAA,IAAA,CAAA,KAAA,CAAA,KAAA,CAAA,OAAA,CAAA;AACA,WAAA,QAAA,CAAA,KAAA,CAAA,OAAA,CAAA,OAAA,IAAA,KAAA,EAAA,CAAA,oBAAA,CAAA;AACA,KAzBA;AA0BA,IAAA,kBA1BA,8BA0BA,IA1BA,EA0BA;AACA,UAAA,KAAA,GAAA,IAAA,CAAA,IAAA,KAAA,UAAA;AACA,UAAA,MAAA,GAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA,IAAA,CAAA;;AACA,UAAA,CAAA,KAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,KAAA,EAAA,CAAA,+BAAA,CAAA;AACA;;AACA,UAAA,CAAA,MAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,KAAA,EAAA,CAAA,+BAAA,CAAA;AACA;;AACA,aAAA,KAAA,IAAA,MAAA;AACA;AApCA;AAvBA,CAAA","sourcesContent":["<template>\n  <div class=\"upload-drop-container\" :class=\"{ 'upload-drop-container-mini': isMinimized, 'upload-drop-container-max': !isMinimized }\">\n    <div class=\"upload-template-info\">\n      <i class=\"el-icon-info red-armellini\"></i>&nbsp;\n      <span class=\"font-gray info-text\"> {{ $t('uploadXmlFiles.youCanDownload') }} &nbsp;</span>\n      <a class=\"red-link-bold\" id=\"xml-upload-download-template-link\" :href=\"templateExampleUrl\" download> {{ $t('uploadXmlFiles.here') }} </a>\n    </div>\n    <span id=\"xml-loading\" class=\"xml-loading\" v-if=\"processing\">\n      <img src=\"@/assets/svg/loading.svg\"  v-bind:class=\"{ 'padding-left_28': actualFileProcessed }\" alt=\"loading\"/>\n    </span>\n    <div class=\"upload-dropzone-area\" @click=\"handleOpenSearchFile\" :class=\"{ 'upload-dropzone-area-mini': isMinimized, 'upload-dropzone-area-max': !isMinimized }\">\n      <i class=\"collapse-drop-zone el-icon-arrow-right\" id=\"collapse-drop-zone\" v-if=\"actualFileProcessed\" v-on:click.stop=\"handleMinimized\" ></i>\n      <el-upload\n      id=\"upload-xml\"\n      class=\"upload-xml\"\n      drag\n      :show-file-list=\"false\"\n      :action=\"url\"\n      :headers=\"{shipperAccountNumber: user.shipperAccountNumber,\n                  Authorization: authorization}\"\n      :on-success=\"handleSuccess\"\n      :on-progress=\"handleProgress\"\n      :on-error=\"handleError\"\n      :before-upload=\"handleBeforeUpload\"\n      :limit=\"1\"\n      accept=\".xml\"\n      ref=\"upload\"\n      >\n      <div class=\"upload-icon-container\">\n        <img src=\"@/assets/png/upload-icon.png\" alt=\"upload-icon\" class=\"upload-icon\">\n        <el-progress type=\"circle\" :percentage=\"uploadProgress\" :show-text=\"false\" v-if=\"!isMinimized\">\n        </el-progress>\n      </div>\n      <div class=\"el-upload__text\"> <div class=\"drag-and-drop-text\"> {{ $t('uploadXmlFiles.dragAndDrop') }} </div> {{ $t('uploadXmlFiles.yourFilesOr') }} <em>{{ $t('uploadXmlFiles.browse') }}</em></div>\n      </el-upload>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport authService from '@/utils/auth/auth0Service';\n\nexport default {\n  name: 'UploadDrop',\n  computed: {\n    ...mapGetters([\n      'user'\n    ])\n  },\n  data() {\n    return {\n      isMinimized: false,\n      uploadProgress: 0,\n      processing: false,\n      actualFileProcessed: false,\n      url: '',\n      templateExampleUrl: '',\n      authorization: null\n    };\n  },\n  mounted() {\n    this.url = `${process.env.VUE_APP_BASE_API}/data-entry/shipment/upload`;\n    this.templateExampleUrl = `${process.env.VUE_APP_BUCKET_ROOT}xml-upload-template.xml`;\n    this.authorization = `Bearer ${authService.accessToken}`;\n  },\n  methods: {\n    handleSuccess(response, file) {\n      this.$store.dispatch('SetUploadXmlResponse', { ...response, fileName: file.name });\n      this.isMinimized = true;\n      this.processing = false;\n      this.actualFileProcessed = true;\n      this.$refs.upload.clearFiles();\n    },\n    handleOpenSearchFile() {\n      this.isMinimized = false;\n      this.uploadProgress = 0;\n    },\n    handleMinimized() {\n      this.isMinimized = !this.isMinimized;\n    },\n    handleProgress(event, file, fileList) {\n      if (!this.processing) {\n        this.processing = true;\n      }\n      this.uploadProgress = fileList[0].percentage;\n    },\n    handleError(error) {\n      this.processing = false;\n      const message = JSON.parse(error.message);\n      this.$message.error(message.message || this.$t('common.errorServer'));\n    },\n    handleBeforeUpload(file) {\n      const isXML = file.type === 'text/xml';\n      const isLt5M = file.size / 1024 / 1024 <= 5;\n      if (!isXML) {\n        this.$message.error(this.$t('uploadXmlFiles.errorExtension'));\n      }\n      if (!isLt5M) {\n        this.$message.error(this.$t('uploadXmlFiles.fileSizeExceed'));\n      }\n      return isXML && isLt5M;\n    }\n  }\n};\n</script>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\" >\n.upload-drop-container {\n  z-index: 1;\n  width: 100%;\n  height: 70%;\n  float: left;\n  position: absolute;\n  text-align: center;\n  bottom: 0px;\n  background-color: #374057;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  &-mini {\n    position: relative;\n    height: 16%;\n    -webkit-transition: height 1s; /* For Safari 3.1 to 6.0 */\n    transition: height 1s;\n  }\n  &-max {\n    position: absolute;\n    height: 70%;\n    -webkit-transition: height 1s; /* For Safari 3.1 to 6.0 */\n    transition: height 1s;\n  }\n  .is-dragover {\n    background-color: #f5f5f5\n  }\n}\n\n.upload-template-info {\n  z-index: 1;\n  position: absolute;\n  top: 0px;\n  width: 100%;\n  height: 30px;\n  background-color: #CAD0D9;\n  font-size: 12px;\n  display: flex;\n  align-items: center;\n  padding-left: 40px;\n}\n\n.xml-loading {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: 3;\n  background-color: rgba(255,255,255,0.4);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.upload-dropzone-area {\n  margin-top: 45px;\n  display: flex;\n  position: relative;\n  .el-upload-dragger {\n    border: 0px;\n    border-radius: 0px;\n    -webkit-transition: height 1s; /* For Safari 3.1 to 6.0 */\n    transition: height 1s;\n  }\n   &-mini {\n     margin-top: 35px;\n     .collapse-drop-zone {\n        margin-bottom: 0px;\n     }\n    .el-upload-dragger {\n      height: 50px;\n      width: 100%;\n      min-width: 52vw;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      .el-upload__text {\n        color: #01355F;\n        .drag-and-drop-text {\n          margin-left: 10px;\n          font-size: 16px;\n          font-weight: bold;\n          margin-top: 10px;\n          text-transform: uppercase;\n          display: inline;\n        }\n        em {\n          color: #ED1C25;\n          text-decoration: underline;\n        }\n      }\n      .upload-icon-container {\n        .upload-icon {\n          height: 40px;\n        }\n      }\n    }\n  }\n  &-max {\n     .collapse-drop-zone {\n        margin-bottom: 3px;\n        &:before {\n          transform: rotate(90deg);\n        }\n     }\n    .el-upload-dragger {\n      height: 260px;\n      width: 450px;\n      .el-upload__text {\n        font-size: 12px;\n        color: #01355F;\n        .drag-and-drop-text {\n          font-size: 18px;\n          font-weight: bold;\n          margin-top: 10px;\n          text-transform: uppercase;\n        }\n        em {\n          color: #ED1C25;\n          text-decoration: underline;\n        }\n      }\n      .upload-icon-container {\n        margin-top: 10%;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        .upload-icon {\n          position: absolute;\n          height: 60px;\n        }\n      }\n    }\n  }\n  .collapse-drop-zone {\n    background-color: white;\n    padding-top: 18px;\n    padding-left: 10px;\n    cursor: pointer;\n    -webkit-transition: height 1s; /* For Safari 3.1 to 6.0 */\n    transition: height 1s;\n  }\n}\n.padding-left_28 {\n  padding-left: 28px;\n}\n\n@media only screen and (max-width: 540px) {\n    .upload-dropzone-area {\n      .el-upload-dragger {\n        width: 340px;\n      }\n    }\n}\n\n@media only screen and (max-height: 540px) {\n    .upload-drop-container-mini {\n        position: relative;\n    }\n}\n</style>\n"],"sourceRoot":"src/views/warehouse/uploadXml"}]}