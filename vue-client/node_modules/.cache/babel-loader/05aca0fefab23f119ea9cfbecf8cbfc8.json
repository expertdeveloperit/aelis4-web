{"remainingRequest":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/babel-loader/lib/index.js!/home/spineor/Downloads/aelis4-web/vue-client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/spineor/Downloads/aelis4-web/vue-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/spineor/Downloads/aelis4-web/vue-client/src/views/warehouse/orderEntry/components/extensions/SubmitExtensionButton.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/spineor/Downloads/aelis4-web/vue-client/src/views/warehouse/orderEntry/components/extensions/SubmitExtensionButton.vue","mtime":1566297892000},{"path":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.function.name\";\nimport _defineProperty from \"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport moment from 'moment';\nimport { mapGetters } from 'vuex';\nexport default {\n  components: {},\n  computed: _objectSpread({}, mapGetters(['orderEntry', 'user', 'extensions'])),\n  data: function data() {\n    return {\n      dialogVisible: false,\n      datePickerHourOptions: {\n        step: '00:15',\n        end: '23:59'\n      },\n      form: {\n        shipDate: new Date(),\n        shippingHour: null,\n        applicantName: null,\n        contactNumber: null,\n        email: null\n      },\n      summary: [],\n      formRules: {\n        shipDate: [{\n          required: true,\n          message: this.$t('warehouse.orderEntry.error.shipDateRequired'),\n          trigger: 'blur'\n        }],\n        shippingHour: [{\n          required: true,\n          message: this.$t('warehouse.orderEntry.error.hourRequired'),\n          trigger: 'blur'\n        }],\n        applicantName: [{\n          required: true,\n          message: this.$t('warehouse.orderEntry.error.applicantNameRequired'),\n          trigger: 'blur'\n        }],\n        email: [{\n          required: true,\n          message: this.$t('signUp.errors.emailRequired'),\n          trigger: 'blur'\n        }, {\n          type: 'email',\n          message: this.$t('signUp.errors.emailValid'),\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    handleClose: function handleClose(done) {\n      done();\n    },\n    handleOpen: function handleOpen() {\n      var _this = this;\n\n      this.form.applicantName = this.user.name;\n      this.form.email = this.user.email;\n      var currentHour = moment();\n      var cutOffHour = moment(this.orderEntry.settings.cutoffHourForToday, 'HH:mm:ss');\n      var minHour = currentHour.isAfter(cutOffHour) ? currentHour.format('HH:mm') : cutOffHour.format('HH:mm');\n      this.datePickerHourOptions.start = minHour; // Clear summary info and update with the store value.\n\n      this.summary = [];\n\n      for (var consigneeAccountId in this.extensions.selectedByConsignee) {\n        if (Object.prototype.hasOwnProperty.call(this.extensions.selectedByConsignee, consigneeAccountId)) {\n          this.summary.push(this.extensions.selectedByConsignee[consigneeAccountId]);\n        }\n      } // NextTick is excecuted when from is ready and then we can put the focus.\n\n\n      this.$nextTick(function () {\n        _this.$refs['form-shipping-hour'].focus();\n      });\n    },\n    formValidate: function formValidate() {\n      var _this2 = this;\n\n      return new Promise(function (resolve) {\n        _this2.$refs.form.validate(function (valid) {\n          var validLengthExtensionDetail = false;\n\n          if (valid) {\n            for (var consigneeAccountId in _this2.extensions.selectedByConsignee) {\n              if (Object.prototype.hasOwnProperty.call(_this2.extensions.selectedByConsignee, consigneeAccountId)) {\n                validLengthExtensionDetail = _this2.extensions.selectedByConsignee[consigneeAccountId].consolidations.length > 0;\n\n                if (validLengthExtensionDetail) {\n                  break;\n                }\n              }\n            }\n\n            if (!validLengthExtensionDetail) {\n              _this2.$message.warning(_this2.$t('warehouse.orderEntry.extensions.selectShipmentsFirst'));\n            }\n          }\n\n          resolve(valid && validLengthExtensionDetail);\n        });\n      });\n    },\n    handleSubmit: function () {\n      var _handleSubmit = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var valid, confirmSubmitExtension, response, message;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.formValidate();\n\n              case 2:\n                valid = _context.sent;\n\n                if (!valid) {\n                  _context.next = 12;\n                  break;\n                }\n\n                _context.next = 6;\n                return this.$confirm(this.$t('warehouse.orderEntry.extensions.confirmSubmitExplanation'), {\n                  confirmButtonText: this.$t('common.yes'),\n                  dangerouslyUseHTMLString: true\n                }).catch(function () {});\n\n              case 6:\n                confirmSubmitExtension = _context.sent;\n\n                if (!confirmSubmitExtension) {\n                  _context.next = 12;\n                  break;\n                }\n\n                _context.next = 10;\n                return this.$store.dispatch('extensions/submit', Object.assign({\n                  shipperAccountId: this.orderEntry.actualFilters.shipperAccountId\n                }, this.form)).catch(function () {});\n\n              case 10:\n                response = _context.sent;\n\n                if (response) {\n                  this.$store.dispatch('orderEntry/setIsCreatingExtension', false);\n                  this.dialogVisible = false;\n                  this.$refs.form.resetFields();\n                  message = \"<div class=\\\"alert-success-extension-submit\\\">\\n              <div class=\\\"container-clock-extension\\\">\\n                <i class=\\\"far fa-clock icon-clock-extension\\\"></i>\\n              </div>\\n              <div class=\\\"text-message-extension\\\">\\n                \".concat(response.message, \"\\n              </div>\\n            </div>\");\n                  this.$store.dispatch('orderEntry/search', {});\n                  this.$alert(message, {\n                    dangerouslyUseHTMLString: true\n                  });\n                }\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function handleSubmit() {\n        return _handleSubmit.apply(this, arguments);\n      }\n\n      return handleSubmit;\n    }()\n  }\n};",{"version":3,"sources":["SubmitExtensionButton.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n<span>\r\n  <el-button id=\"btn-open-dialog-submit-extension\" type=\"primary\" size=\"mini\" @click=\"dialogVisible = true\"> {{ $t('common.submit') }}</el-button>\r\n  <el-dialog\r\n    :close-on-click-modal=\"false\"\r\n    v-on:open=\"handleOpen\"\r\n    :title=\"$t('warehouse.orderEntry.extensions.extensionRequest')\"\r\n    :visible.sync=\"dialogVisible\"\r\n    width=\"40%\"\r\n    id=\"submit-extension-dialog\"\r\n    class=\"dialog-with-cols\"\r\n    :before-close=\"handleClose\">\r\n    <div id=\"submit-extension-div\">\r\n      <el-form :model=\"form\" :rules=\"formRules\" ref=\"form\" label-position=\"top\" size=\"mini\" class=\"form-with-cols\">\r\n      <el-col :span=\"24\">\r\n          <el-col :md=\"12\" :sm=\"24\" :xs=\"24\" class=\"form-vertical-item\">\r\n              <el-form-item :label=\"$t('warehouse.orderEntry.shipDate')\" prop=\"shipDate\">\r\n                <el-date-picker\r\n                  v-model=\"form.shipDate\"\r\n                  :disabled=\"true\"\r\n                  :default-value=\"orderEntry.actualFilters.shipDate\"\r\n                  style=\"width: 100%\"\r\n                  format=\"MM/dd/yyyy\"\r\n                  :picker-options=\"orderEntry.shipDatePickerOptions\"\r\n                  type=\"date\"\r\n                  id=\"form-extensions-ship-date\">\r\n                </el-date-picker>\r\n              </el-form-item>\r\n          </el-col>\r\n          <el-col :md=\"12\" :sm=\"12\" :xs=\"12\" class=\"form-vertical-item\">\r\n              <el-form-item :label=\"$t('warehouse.orderEntry.hour')\" prop=\"shippingHour\">\r\n                <el-time-select\r\n                  id=\"form-extensions-shipping-hour\"\r\n                  ref=\"form-shipping-hour\"\r\n                  style=\"width: 100%\"\r\n                  placeholder=\"Start time\"\r\n                  v-model=\"form.shippingHour\"\r\n                  :picker-options=\"datePickerHourOptions\">\r\n                </el-time-select>\r\n              </el-form-item>\r\n          </el-col>\r\n          <el-col :md=\"24\" :sm=\"24\" :xs=\"24\" class=\"form-vertical-item\">\r\n              <el-form-item :label=\"$t('warehouse.orderEntry.applicantName')\" prop=\"applicantName\">\r\n                <el-input\r\n                  v-model=\"form.applicantName\"\r\n                  maxlength=\"80\"\r\n                  clearable\r\n                  class=\"inline-input\"\r\n                  id=\"form-extensions-applicant-name\">\r\n                </el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :md=\"12\" :sm=\"24\" :xs=\"24\" class=\"form-vertical-item\">\r\n              <el-form-item :label=\"$t('common.email')\" prop=\"email\">\r\n                <el-input\r\n                  v-model=\"form.email\"\r\n                  maxlength=\"100\"\r\n                  clearable\r\n                  class=\"inline-input\"\r\n                  id=\"form-extensions-email\">\r\n                </el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :md=\"12\" :sm=\"24\" :xs=\"24\" class=\"form-vertical-item\">\r\n              <el-form-item :label=\"$t('warehouse.orderEntry.contactNumber')\" prop=\"contactNumber\">\r\n                <el-input\r\n                  v-model=\"form.contactNumber\"\r\n                  maxlength=\"15\"\r\n                  clearable\r\n                  class=\"inline-input\"\r\n                  id=\"form-extensions-contact-number\">\r\n                </el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :md=\"24\" :sm=\"24\" :xs=\"24\" class=\"form-vertical-item\">\r\n            <el-form-item :label=\"$t('warehouse.orderEntry.extensions.notes')\" prop=\"notes\">\r\n              <el-input\r\n                v-model=\"form.notes\"\r\n                type=\"textarea\"\r\n                maxlength=\"200\"\r\n                show-word-limit\r\n                clearable\r\n                class=\"inline-input\"\r\n                id=\"form-extensions-notes\"\r\n              >\r\n              </el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <!--- TABLE SUMMARY --->\r\n          <el-col :md=\"24\" :sm=\"24\" :xs=\"24\">\r\n            <div class=\"height-100-p summary-extension-submit\">\r\n              <el-table\r\n                :data=\"summary\"\r\n                id=\"summary-extension-submit-list\"\r\n                size=\"mini\"\r\n                tooltip-effect=\"dark\"\r\n                sortable\r\n                class=\"dark-blue-table\"\r\n                :empty-text=\"$t('warehouse.orderEntry.extensions.noShipmentsSelected')\"\r\n                stripe>\r\n                <el-table-column\r\n                  prop=\"consigneeAccountName\"\r\n                  :sortable=\"true\"\r\n                  :min-width=\"75\"\r\n                  align=\"center\"\r\n                  :label=\"$t('warehouse.orderEntry.consignee')\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                  prop=\"totalUnits\"\r\n                  :sortable=\"true\"\r\n                  :min-width=\"25\"\r\n                  :label=\"$t('warehouse.orderEntry.units')\">\r\n                </el-table-column>\r\n                </el-table>\r\n              </div>\r\n            </el-col>\r\n            <!--- END TABLE SUMMARY --->\r\n        </el-col>\r\n        </el-form>\r\n    </div>\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n       <el-button @click=\"dialogVisible = false\" size=\"mini\">{{ $t('common.cancel') }}</el-button>\r\n       <el-button type=\"primary\" @click=\"handleSubmit\" size=\"mini\" class=\"margin-r-18\" id=\"btn-submit-extension\">{{ $t('common.submit') }}</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</span>\r\n</template>\r\n\r\n<script>\r\nimport moment from 'moment';\r\nimport { mapGetters } from 'vuex';\r\n\r\nexport default {\r\n  components: {},\r\n  computed: {\r\n    ...mapGetters([\r\n      'orderEntry',\r\n      'user',\r\n      'extensions'\r\n    ])\r\n  },\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      datePickerHourOptions: {\r\n        step: '00:15',\r\n        end: '23:59'\r\n      },\r\n      form: {\r\n        shipDate: new Date(),\r\n        shippingHour: null,\r\n        applicantName: null,\r\n        contactNumber: null,\r\n        email: null\r\n      },\r\n      summary: [],\r\n      formRules: {\r\n        shipDate: [\r\n          { required: true, message: this.$t('warehouse.orderEntry.error.shipDateRequired'), trigger: 'blur' }\r\n        ],\r\n        shippingHour: [\r\n          { required: true, message: this.$t('warehouse.orderEntry.error.hourRequired'), trigger: 'blur' }\r\n        ],\r\n        applicantName: [\r\n          { required: true, message: this.$t('warehouse.orderEntry.error.applicantNameRequired'), trigger: 'blur' }\r\n        ],\r\n        email: [\r\n          { required: true, message: this.$t('signUp.errors.emailRequired'), trigger: 'blur' },\r\n          { type: 'email', message: this.$t('signUp.errors.emailValid'), trigger: 'blur' }\r\n        ]\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    handleClose(done) {\r\n      done();\r\n    },\r\n    handleOpen() {\r\n      this.form.applicantName = this.user.name;\r\n      this.form.email = this.user.email;\r\n      const currentHour = moment();\r\n      const cutOffHour = moment(this.orderEntry.settings.cutoffHourForToday, 'HH:mm:ss');\r\n      const minHour = currentHour.isAfter(cutOffHour) ? currentHour.format('HH:mm') : cutOffHour.format('HH:mm');\r\n      this.datePickerHourOptions.start = minHour;\r\n\r\n      // Clear summary info and update with the store value.\r\n      this.summary = [];\r\n      for (const consigneeAccountId in this.extensions.selectedByConsignee) {\r\n        if (Object.prototype.hasOwnProperty.call(this.extensions.selectedByConsignee, consigneeAccountId)) {\r\n          this.summary.push(this.extensions.selectedByConsignee[consigneeAccountId]);\r\n        }\r\n      }\r\n\r\n      // NextTick is excecuted when from is ready and then we can put the focus.\r\n      this.$nextTick(() => {\r\n        this.$refs['form-shipping-hour'].focus();\r\n      });\r\n    },\r\n    formValidate() {\r\n      return new Promise((resolve) => {\r\n        this.$refs.form.validate((valid) => {\r\n          let validLengthExtensionDetail = false;\r\n          if (valid) {\r\n            for (const consigneeAccountId in this.extensions.selectedByConsignee) {\r\n              if (Object.prototype.hasOwnProperty.call(this.extensions.selectedByConsignee, consigneeAccountId)) {\r\n                validLengthExtensionDetail = this.extensions.selectedByConsignee[consigneeAccountId].consolidations.length > 0;\r\n                if (validLengthExtensionDetail) {\r\n                  break;\r\n                }\r\n              }\r\n            }\r\n            if (!validLengthExtensionDetail) {\r\n              this.$message.warning(this.$t('warehouse.orderEntry.extensions.selectShipmentsFirst'));\r\n            }\r\n          }\r\n          resolve(valid && validLengthExtensionDetail);\r\n        });\r\n      });\r\n    },\r\n    async handleSubmit() {\r\n      const valid = await this.formValidate();\r\n      if (valid) {\r\n        const confirmSubmitExtension = await this.$confirm(this.$t('warehouse.orderEntry.extensions.confirmSubmitExplanation'), { confirmButtonText: this.$t('common.yes'), dangerouslyUseHTMLString: true }).catch(() => {});\r\n        if (confirmSubmitExtension) {\r\n          const response = await this.$store.dispatch('extensions/submit', Object.assign({ shipperAccountId: this.orderEntry.actualFilters.shipperAccountId }, this.form)).catch(() => {});\r\n          if (response) {\r\n            this.$store.dispatch('orderEntry/setIsCreatingExtension', false);\r\n            this.dialogVisible = false;\r\n            this.$refs.form.resetFields();\r\n            const message = `<div class=\"alert-success-extension-submit\">\r\n              <div class=\"container-clock-extension\">\r\n                <i class=\"far fa-clock icon-clock-extension\"></i>\r\n              </div>\r\n              <div class=\"text-message-extension\">\r\n                ${response.message}\r\n              </div>\r\n            </div>`;\r\n            this.$store.dispatch('orderEntry/search', {});\r\n            this.$alert(message, {\r\n              dangerouslyUseHTMLString: true\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style rel=\"stylesheet/scss\" lang=\"scss\">\r\n#btn-open-dialog-submit-extension {\r\n  margin-left: 10px;\r\n}\r\n.summary-extension-submit {\r\n  margin-top: 10px;\r\n  margin-bottom: 10px;\r\n}\r\n.alert-success-extension-submit {\r\n  display: flex;\r\n  align-items: center;\r\n  .container-clock-extension {\r\n    width: 20%;\r\n    display: inline;\r\n    .icon-clock-extension {\r\n      font-size: 62px;\r\n      color: orange\r\n    }\r\n  }\r\n  .text-message-extension {\r\n    width: 80%;\r\n    display: inline;\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/warehouse/orderEntry/components/extensions"}]}