{"remainingRequest":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/babel-loader/lib/index.js!/home/spineor/Downloads/aelis4-web/vue-client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/spineor/Downloads/aelis4-web/vue-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/spineor/Downloads/aelis4-web/vue-client/src/views/warehouse/orderEntry/components/AddConsigneeShipperButton.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/spineor/Downloads/aelis4-web/vue-client/src/views/warehouse/orderEntry/components/AddConsigneeShipperButton.vue","mtime":1566297892000},{"path":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Message } from 'element-ui';\nimport { mapGetters } from 'vuex';\nimport constants from '@/utils/constants';\nimport apiConstants from '@/utils/apiConstants';\nimport Autocomplete from '@/components/Autocomplete';\nexport default {\n  components: {\n    Autocomplete: Autocomplete\n  },\n  computed: _objectSpread({}, mapGetters(['orderEntry', 'user'])),\n  data: function data() {\n    return {\n      dialogVisible: false,\n      consigneeAccountId: null,\n      consigneeSelected: {},\n      urlConsignee: apiConstants.END_POINTS.ACCOUNTS.CONSIGNEE_BY_TYPE,\n      haveDaysOfService: false\n    };\n  },\n  methods: {\n    handleClose: function handleClose(done) {\n      this.clear();\n      done();\n    },\n    handleOpen: function handleOpen() {\n      var _this = this;\n\n      this.$nextTick(function () {\n        _this.$refs['add-consignee-autocomplete'].$el.getElementsByTagName('input')[0].focus();\n      });\n    },\n    handleAddConsigneeShipperRelation: function () {\n      var _handleAddConsigneeShipperRelation = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var confirm, loading;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.$confirm(\"\".concat(this.$t('warehouse.orderEntry.accounts.addConsigneeShipperRelationConfirm')), {\n                  confirmButtonText: this.$t('common.yes')\n                }).catch(function () {});\n\n              case 2:\n                confirm = _context.sent;\n\n                if (confirm) {\n                  _context.next = 5;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", false);\n\n              case 5:\n                Message.closeAll();\n                loading = this.$loading(constants.LOADING.DEFAULT_CONFIG);\n                _context.prev = 7;\n                _context.next = 10;\n                return this.$store.dispatch('account/addConsigneeShipperRelation', {\n                  shipperAccountId: this.orderEntry.actualFilters.shipperAccountId,\n                  consigneeAccountId: this.consigneeSelected.id\n                });\n\n              case 10:\n                this.$message.success(this.$t('warehouse.orderEntry.accounts.addConsigneeShipperRelationSuccess'));\n                this.dialogVisible = false;\n                this.clear();\n                _context.next = 18;\n                break;\n\n              case 15:\n                _context.prev = 15;\n                _context.t0 = _context[\"catch\"](7);\n                return _context.abrupt(\"return\", false);\n\n              case 18:\n                _context.prev = 18;\n                loading.close();\n                return _context.finish(18);\n\n              case 21:\n                return _context.abrupt(\"return\", true);\n\n              case 22:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[7, 15, 18, 21]]);\n      }));\n\n      function handleAddConsigneeShipperRelation() {\n        return _handleAddConsigneeShipperRelation.apply(this, arguments);\n      }\n\n      return handleAddConsigneeShipperRelation;\n    }(),\n    handleSearch: function handleSearch(item) {\n      Object.assign(this.consigneeSelected, item);\n      this.haveDaysOfService = this.consigneeSelected.daysOfService.monday || this.consigneeSelected.daysOfService.tuesday || this.consigneeSelected.daysOfService.wednesday || this.consigneeSelected.daysOfService.thursday || this.consigneeSelected.daysOfService.friday || this.consigneeSelected.daysOfService.saturday || this.consigneeSelected.daysOfService.sunday;\n      this.clearAutocomplete();\n    },\n    clear: function clear() {\n      this.consigneeSelected = {};\n      this.clearAutocomplete();\n      this.$refs['add-consignee-autocomplete'].$el.getElementsByTagName('input')[0].focus();\n    },\n    clearAutocomplete: function clearAutocomplete() {\n      this.consigneeAccountId = null;\n      this.$refs['add-consignee-autocomplete'].clearLocalModel();\n    }\n  }\n};",{"version":3,"sources":["AddConsigneeShipperButton.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n<span>\r\n  <el-button id=\"btn-open-dialog-add-consignee-shipper\" icon=\"el-icon-plus\" size=\"mini\" @click=\"dialogVisible = true\" class=\"button-action-default\"></el-button>\r\n  <el-dialog\r\n    :close-on-click-modal=\"false\"\r\n    v-on:open=\"handleOpen\"\r\n    :title=\"$t('warehouse.orderEntry.accounts.shipperConsignee')\"\r\n    :visible.sync=\"dialogVisible\"\r\n    width=\"40%\"\r\n    id=\"add-consignee-shipper-dialog\"\r\n    :before-close=\"handleClose\">\r\n    <div class=\"explanation-add-shipper-consignee\">\r\n      <span>{{ $t('warehouse.orderEntry.accounts.addConsigneeShipperRelationExplanation') }}</span>\r\n    </div>\r\n    <div id=\"add-consignee-shipper-div\">\r\n      <autocomplete\r\n        :model.sync=\"consigneeAccountId\"\r\n        :url=\"urlConsignee\"\r\n        labelField=\"name\"\r\n        labelFieldLastWithDash=\"number\"\r\n        :selectAction=\"handleSearch\"\r\n        :enterKeyAction=\"handleSearch\"\r\n        :shipperAccountId=\"orderEntry.settings.shipperAccountId\"\r\n        :placeholder=\"$t('warehouse.orderEntry.accounts.enterConsigneeCustomerAccount')\"\r\n        classCss=\"width-85p\"\r\n        valueField=\"id\"\r\n        id=\"add-consignee-autocomplete\"\r\n        ref=\"add-consignee-autocomplete\"/>\r\n        <span>\r\n          <el-tooltip class=\"item\" effect=\"dark\" :content=\"$t('warehouse.orderEntry.search')\" placement=\"top-start\">\r\n            <el-button id=\"add-consignee-search-button\" @click=\"handleSearch\" icon=\"el-icon-search\" size=\"mini\" class=\"button-action-default\"></el-button>\r\n          </el-tooltip>\r\n        </span>\r\n\r\n        <div class=\"consignee-account-info\" v-if=\"consigneeSelected.name\">\r\n          <div>\r\n            <b><i class=\"far fa-user\"></i> {{ consigneeSelected.name }} - {{ consigneeSelected.number }}</b>\r\n          </div>\r\n          <div>\r\n            <i class=\"el-icon-location-outline\"></i> {{ consigneeSelected.address }}, {{ consigneeSelected.state }}, {{ consigneeSelected.city }} {{ consigneeSelected.zipCode }}\r\n          </div>\r\n          <div>\r\n            <i class=\"el-icon-phone-outline\"></i> {{ consigneeSelected.phone }}\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"consignee-days-of-service-info\" v-if=\"consigneeSelected.name\">\r\n          <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" class=\"dark-blue-table el-table consignee-days-of-service-table\">\r\n            <thead>\r\n              <tr class=\"\">\r\n                <th colspan=\"7\" rowspan=\"1\" class=\"is-leaf\">\r\n                  <div class=\"cell\">{{ $t('common.daysOfService') }}</div>\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr>\r\n                <td rowspan=\"1\" colspan=\"1\" :class=\"{ 'enabled-day': consigneeSelected.daysOfService.monday, 'disabled-day': !consigneeSelected.daysOfService.monday }\">\r\n                  <div class=\"cell\">{{ $t('days.mondayShort') }}</div>\r\n                </td>\r\n                <td rowspan=\"1\" colspan=\"1\" :class=\"{ 'enabled-day': consigneeSelected.daysOfService.tuesday, 'disabled-day': !consigneeSelected.daysOfService.tuesday }\">\r\n                  <div class=\"cell\">{{ $t('days.tuesdayShort') }}</div>\r\n                </td>\r\n                <td rowspan=\"1\" colspan=\"1\" :class=\"{ 'enabled-day': consigneeSelected.daysOfService.wednesday, 'disabled-day': !consigneeSelected.daysOfService.wednesday }\">\r\n                  <div class=\"cell\">{{ $t('days.wednesdayShort') }}</div>\r\n                </td>\r\n                <td rowspan=\"1\" colspan=\"1\" :class=\"{ 'enabled-day': consigneeSelected.daysOfService.thursday, 'disabled-day': !consigneeSelected.daysOfService.thursday }\">\r\n                  <div class=\"cell\">{{ $t('days.thursdayShort') }}</div>\r\n                </td>\r\n                <td rowspan=\"1\" colspan=\"1\" :class=\"{ 'enabled-day': consigneeSelected.daysOfService.friday, 'disabled-day': !consigneeSelected.daysOfService.friday }\">\r\n                  <div class=\"cell\">{{ $t('days.fridayShort') }}</div>\r\n                </td>\r\n                <td rowspan=\"1\" colspan=\"1\" :class=\"{ 'enabled-day': consigneeSelected.daysOfService.saturday, 'disabled-day': !consigneeSelected.daysOfService.saturday }\">\r\n                  <div class=\"cell\">{{ $t('days.saturdayShort') }}</div>\r\n                </td>\r\n                <td rowspan=\"1\" colspan=\"1\" :class=\"{ 'enabled-day': consigneeSelected.daysOfService.sunday, 'disabled-day': !consigneeSelected.daysOfService.sunday }\">\r\n                  <div class=\"cell\">{{ $t('days.sundayShort') }}</div>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div>\r\n          <span v-if=\"!haveDaysOfService && consigneeSelected.name\">{{ $t('warehouse.orderEntry.accounts.consigneeDontHaveDaysOfService') }}</span>\r\n        </div>\r\n    </div>\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n      <el-tooltip class=\"item\" v-if=\"consigneeSelected.name\" effect=\"dark\" :content=\"$t('warehouse.orderEntry.addConsignee')\" placement=\"top-start\">\r\n        <el-button id=\"btn-add-consignee-shipper\" icon=\"el-icon-plus\" size=\"mini\" @click=\"handleAddConsigneeShipperRelation\" class=\"button-action-default\" ></el-button>\r\n      </el-tooltip>\r\n      <el-tooltip class=\"item\" v-if=\"consigneeSelected.name\" effect=\"dark\" :content=\"$t('warehouse.orderEntry.clear')\" placement=\"top-start\">\r\n        <el-button id=\"btn-clear-consignee-info\" icon=\"fa fa-eraser\" size=\"mini\" @click=\"clear\" class=\"button-action-default\" ></el-button>\r\n      </el-tooltip>\r\n    </div>\r\n  </el-dialog>\r\n</span>\r\n</template>\r\n\r\n<script>\r\nimport { Message } from 'element-ui';\r\nimport { mapGetters } from 'vuex';\r\nimport constants from '@/utils/constants';\r\nimport apiConstants from '@/utils/apiConstants';\r\nimport Autocomplete from '@/components/Autocomplete';\r\n\r\nexport default {\r\n  components: { Autocomplete },\r\n  computed: {\r\n    ...mapGetters([\r\n      'orderEntry',\r\n      'user'\r\n    ])\r\n  },\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      consigneeAccountId: null,\r\n      consigneeSelected: {},\r\n      urlConsignee: apiConstants.END_POINTS.ACCOUNTS.CONSIGNEE_BY_TYPE,\r\n      haveDaysOfService: false\r\n    };\r\n  },\r\n  methods: {\r\n    handleClose(done) {\r\n      this.clear();\r\n      done();\r\n    },\r\n    handleOpen() {\r\n      this.$nextTick(() => {\r\n        this.$refs['add-consignee-autocomplete'].$el.getElementsByTagName('input')[0].focus();\r\n      });\r\n    },\r\n    async handleAddConsigneeShipperRelation() {\r\n      const confirm = await this.$confirm(`${this.$t('warehouse.orderEntry.accounts.addConsigneeShipperRelationConfirm')}`, { confirmButtonText: this.$t('common.yes') }).catch(() => {});\r\n      if (!confirm) { return false; }\r\n      Message.closeAll();\r\n      const loading = this.$loading(constants.LOADING.DEFAULT_CONFIG);\r\n\r\n      try {\r\n        await this.$store.dispatch('account/addConsigneeShipperRelation', { shipperAccountId: this.orderEntry.actualFilters.shipperAccountId, consigneeAccountId: this.consigneeSelected.id });\r\n        this.$message.success(this.$t('warehouse.orderEntry.accounts.addConsigneeShipperRelationSuccess'));\r\n        this.dialogVisible = false;\r\n        this.clear();\r\n      } catch (error) {\r\n        return false;\r\n      } finally {\r\n        loading.close();\r\n      }\r\n      return true;\r\n    },\r\n    handleSearch(item) {\r\n      Object.assign(this.consigneeSelected, item);\r\n      this.haveDaysOfService = this.consigneeSelected.daysOfService.monday || this.consigneeSelected.daysOfService.tuesday || this.consigneeSelected.daysOfService.wednesday || this.consigneeSelected.daysOfService.thursday || this.consigneeSelected.daysOfService.friday || this.consigneeSelected.daysOfService.saturday || this.consigneeSelected.daysOfService.sunday;\r\n      this.clearAutocomplete();\r\n    },\r\n    clear() {\r\n      this.consigneeSelected = {};\r\n      this.clearAutocomplete();\r\n      this.$refs['add-consignee-autocomplete'].$el.getElementsByTagName('input')[0].focus();\r\n    },\r\n    clearAutocomplete() {\r\n      this.consigneeAccountId = null;\r\n      this.$refs['add-consignee-autocomplete'].clearLocalModel();\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style rel=\"stylesheet/scss\" lang=\"scss\">\r\n#btn-open-dialog-add-consignee-shipper {\r\n  margin-left: 10px;\r\n}\r\n#add-consignee-search-button {\r\n  float: right;\r\n}\r\n#btn-clear-consignee-info {\r\n  margin-right: 20px;\r\n}\r\n#add-consignee-shipper-div {\r\n  padding-right: 20px;\r\n  padding-left: 20px;\r\n  .consignee-account-info {\r\n    margin-top: 20px;\r\n  }\r\n  .consignee-days-of-service-info {\r\n    margin-top: 20px;\r\n    margin-bottom: 12px;\r\n    .consignee-days-of-service-table {\r\n      th {\r\n        text-align: center;\r\n        font-size: 14px;\r\n        padding-top: 5px;\r\n        padding-bottom: 5px;\r\n      }\r\n      td {\r\n        font-weight: bold;\r\n        border-left: 2px solid #fafffa;\r\n        text-align: center;\r\n        text-transform: uppercase;\r\n        padding-top: 5px;\r\n        padding-bottom: 5px;\r\n        &:first-of-type {\r\n          border-left: none;\r\n        }\r\n      }\r\n      .enabled-day {\r\n        color: #008D00;\r\n        background-color: rgba(0, 141, 0, 0.15);\r\n      }\r\n      .disabled-day {\r\n        color: #9b9b9b;\r\n        background-color: #EFEFEF;\r\n      }\r\n    }\r\n  }\r\n}\r\n.explanation-add-shipper-consignee{\r\n        margin-top: -18px;\r\n        margin-bottom: 17px;\r\n        color: #838181;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/warehouse/orderEntry/components"}]}