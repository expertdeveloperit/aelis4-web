{"remainingRequest":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/spineor/Downloads/aelis4-web/vue-client/src/views/warehouse/orderEntry/components/AddConsigneeShipperButton.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/spineor/Downloads/aelis4-web/vue-client/src/views/warehouse/orderEntry/components/AddConsigneeShipperButton.vue","mtime":1566984596000},{"path":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/spineor/Downloads/aelis4-web/vue-client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { Message } from 'element-ui';\nimport { mapGetters } from 'vuex';\nimport constants from '@/utils/constants';\nimport apiConstants from '@/utils/apiConstants';\nimport Autocomplete from '@/components/Autocomplete';\n\nexport default {\n  components: { Autocomplete },\n  computed: {\n    ...mapGetters([\n      'orderEntry',\n      'user'\n    ])\n  },\n  data() {\n    return {\n      dialogVisible: false,\n      consigneeAccountId: null,\n      consigneeSelected: {},\n      urlConsignee: apiConstants.END_POINTS.ACCOUNTS.CONSIGNEE_BY_TYPE,\n      haveDaysOfService: false\n    };\n  },\n  methods: {\n    handleClose(done) {\n      this.clear();\n      done();\n    },\n    handleOpen() {\n      this.$nextTick(() => {\n        this.$refs['add-consignee-autocomplete'].$el.getElementsByTagName('input')[0].focus();\n      });\n    },\n    async handleAddConsigneeShipperRelation() {\n      const confirm = await this.$confirm(`${this.$t('warehouse.orderEntry.accounts.addConsigneeShipperRelationConfirm')}`, { confirmButtonText: this.$t('common.yes') }).catch(() => {});\n      if (!confirm) { return false; }\n      Message.closeAll();\n      const loading = this.$loading(constants.LOADING.DEFAULT_CONFIG);\n\n      try {\n        await this.$store.dispatch('account/addConsigneeShipperRelation', { shipperAccountId: this.orderEntry.actualFilters.shipperAccountId, consigneeAccountId: this.consigneeSelected.id });\n        this.$message.success(this.$t('warehouse.orderEntry.accounts.addConsigneeShipperRelationSuccess'));\n        this.dialogVisible = false;\n        this.clear();\n      } catch (error) {\n        return false;\n      } finally {\n        loading.close();\n      }\n      return true;\n    },\n    handleSearch(item) {\n      Object.assign(this.consigneeSelected, item);\n      this.haveDaysOfService = this.consigneeSelected.daysOfService.monday || this.consigneeSelected.daysOfService.tuesday || this.consigneeSelected.daysOfService.wednesday || this.consigneeSelected.daysOfService.thursday || this.consigneeSelected.daysOfService.friday || this.consigneeSelected.daysOfService.saturday || this.consigneeSelected.daysOfService.sunday;\n      this.clearAutocomplete();\n    },\n    clear() {\n      this.consigneeSelected = {};\n      this.clearAutocomplete();\n      this.$refs['add-consignee-autocomplete'].$el.getElementsByTagName('input')[0].focus();\n    },\n    clearAutocomplete() {\n      this.consigneeAccountId = null;\n      this.$refs['add-consignee-autocomplete'].clearLocalModel();\n    }\n  }\n};\n",{"version":3,"sources":["AddConsigneeShipperButton.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddConsigneeShipperButton.vue","sourceRoot":"src/views/warehouse/orderEntry/components","sourcesContent":["<template>\n<span>\n  <el-button id=\"btn-open-dialog-add-consignee-shipper\" icon=\"el-icon-plus\" size=\"mini\" @click=\"dialogVisible = true\" class=\"button-action-default\"></el-button>\n  <el-dialog\n    :close-on-click-modal=\"false\"\n    v-on:open=\"handleOpen\"\n    :title=\"$t('warehouse.orderEntry.accounts.shipperConsignee')\"\n    :visible.sync=\"dialogVisible\"\n    width=\"40%\"\n    id=\"add-consignee-shipper-dialog\"\n    :before-close=\"handleClose\">\n    <div class=\"explanation-add-shipper-consignee\">\n      <span>{{ $t('warehouse.orderEntry.accounts.addConsigneeShipperRelationExplanation') }}</span>\n    </div>\n    <div id=\"add-consignee-shipper-div\">\n      <autocomplete\n        :model.sync=\"consigneeAccountId\"\n        :url=\"urlConsignee\"\n        labelField=\"name\"\n        labelFieldLastWithDash=\"number\"\n        :selectAction=\"handleSearch\"\n        :enterKeyAction=\"handleSearch\"\n        :shipperAccountId=\"orderEntry.settings.shipperAccountId\"\n        :placeholder=\"$t('warehouse.orderEntry.accounts.enterConsigneeCustomerAccount')\"\n        classCss=\"width-85p\"\n        valueField=\"id\"\n        id=\"add-consignee-autocomplete\"\n        ref=\"add-consignee-autocomplete\"/>\n        <span>\n          <el-tooltip class=\"item\" effect=\"dark\" :content=\"$t('warehouse.orderEntry.search')\" placement=\"top-start\">\n            <el-button id=\"add-consignee-search-button\" @click=\"handleSearch\" icon=\"el-icon-search\" size=\"mini\" class=\"button-action-default\"></el-button>\n          </el-tooltip>\n        </span>\n\n        <div class=\"consignee-account-info\" v-if=\"consigneeSelected.name\">\n          <div>\n            <b><i class=\"far fa-user\"></i> {{ consigneeSelected.name }} - {{ consigneeSelected.number }}</b>\n          </div>\n          <div>\n            <i class=\"el-icon-location-outline\"></i> {{ consigneeSelected.address }}, {{ consigneeSelected.state }}, {{ consigneeSelected.city }} {{ consigneeSelected.zipCode }}\n          </div>\n          <div>\n            <i class=\"el-icon-phone-outline\"></i> {{ consigneeSelected.phone }}\n          </div>\n        </div>\n\n        <div class=\"consignee-days-of-service-info\" v-if=\"consigneeSelected.name\">\n          <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" class=\"dark-blue-table el-table consignee-days-of-service-table\">\n            <thead>\n              <tr class=\"\">\n                <th colspan=\"7\" rowspan=\"1\" class=\"is-leaf\">\n                  <div class=\"cell\">{{ $t('common.daysOfService') }}</div>\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td rowspan=\"1\" colspan=\"1\" :class=\"{ 'enabled-day': consigneeSelected.daysOfService.monday, 'disabled-day': !consigneeSelected.daysOfService.monday }\">\n                  <div class=\"cell\">{{ $t('days.mondayShort') }}</div>\n                </td>\n                <td rowspan=\"1\" colspan=\"1\" :class=\"{ 'enabled-day': consigneeSelected.daysOfService.tuesday, 'disabled-day': !consigneeSelected.daysOfService.tuesday }\">\n                  <div class=\"cell\">{{ $t('days.tuesdayShort') }}</div>\n                </td>\n                <td rowspan=\"1\" colspan=\"1\" :class=\"{ 'enabled-day': consigneeSelected.daysOfService.wednesday, 'disabled-day': !consigneeSelected.daysOfService.wednesday }\">\n                  <div class=\"cell\">{{ $t('days.wednesdayShort') }}</div>\n                </td>\n                <td rowspan=\"1\" colspan=\"1\" :class=\"{ 'enabled-day': consigneeSelected.daysOfService.thursday, 'disabled-day': !consigneeSelected.daysOfService.thursday }\">\n                  <div class=\"cell\">{{ $t('days.thursdayShort') }}</div>\n                </td>\n                <td rowspan=\"1\" colspan=\"1\" :class=\"{ 'enabled-day': consigneeSelected.daysOfService.friday, 'disabled-day': !consigneeSelected.daysOfService.friday }\">\n                  <div class=\"cell\">{{ $t('days.fridayShort') }}</div>\n                </td>\n                <td rowspan=\"1\" colspan=\"1\" :class=\"{ 'enabled-day': consigneeSelected.daysOfService.saturday, 'disabled-day': !consigneeSelected.daysOfService.saturday }\">\n                  <div class=\"cell\">{{ $t('days.saturdayShort') }}</div>\n                </td>\n                <td rowspan=\"1\" colspan=\"1\" :class=\"{ 'enabled-day': consigneeSelected.daysOfService.sunday, 'disabled-day': !consigneeSelected.daysOfService.sunday }\">\n                  <div class=\"cell\">{{ $t('days.sundayShort') }}</div>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        <div>\n          <span v-if=\"!haveDaysOfService && consigneeSelected.name\">{{ $t('warehouse.orderEntry.accounts.consigneeDontHaveDaysOfService') }}</span>\n        </div>\n    </div>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-tooltip class=\"item\" v-if=\"consigneeSelected.name\" effect=\"dark\" :content=\"$t('warehouse.orderEntry.addConsignee')\" placement=\"top-start\">\n        <el-button id=\"btn-add-consignee-shipper\" icon=\"el-icon-plus\" size=\"mini\" @click=\"handleAddConsigneeShipperRelation\" class=\"button-action-default\" ></el-button>\n      </el-tooltip>\n      <el-tooltip class=\"item\" v-if=\"consigneeSelected.name\" effect=\"dark\" :content=\"$t('warehouse.orderEntry.clear')\" placement=\"top-start\">\n        <el-button id=\"btn-clear-consignee-info\" icon=\"fa fa-eraser\" size=\"mini\" @click=\"clear\" class=\"button-action-default\" ></el-button>\n      </el-tooltip>\n    </div>\n  </el-dialog>\n</span>\n</template>\n\n<script>\nimport { Message } from 'element-ui';\nimport { mapGetters } from 'vuex';\nimport constants from '@/utils/constants';\nimport apiConstants from '@/utils/apiConstants';\nimport Autocomplete from '@/components/Autocomplete';\n\nexport default {\n  components: { Autocomplete },\n  computed: {\n    ...mapGetters([\n      'orderEntry',\n      'user'\n    ])\n  },\n  data() {\n    return {\n      dialogVisible: false,\n      consigneeAccountId: null,\n      consigneeSelected: {},\n      urlConsignee: apiConstants.END_POINTS.ACCOUNTS.CONSIGNEE_BY_TYPE,\n      haveDaysOfService: false\n    };\n  },\n  methods: {\n    handleClose(done) {\n      this.clear();\n      done();\n    },\n    handleOpen() {\n      this.$nextTick(() => {\n        this.$refs['add-consignee-autocomplete'].$el.getElementsByTagName('input')[0].focus();\n      });\n    },\n    async handleAddConsigneeShipperRelation() {\n      const confirm = await this.$confirm(`${this.$t('warehouse.orderEntry.accounts.addConsigneeShipperRelationConfirm')}`, { confirmButtonText: this.$t('common.yes') }).catch(() => {});\n      if (!confirm) { return false; }\n      Message.closeAll();\n      const loading = this.$loading(constants.LOADING.DEFAULT_CONFIG);\n\n      try {\n        await this.$store.dispatch('account/addConsigneeShipperRelation', { shipperAccountId: this.orderEntry.actualFilters.shipperAccountId, consigneeAccountId: this.consigneeSelected.id });\n        this.$message.success(this.$t('warehouse.orderEntry.accounts.addConsigneeShipperRelationSuccess'));\n        this.dialogVisible = false;\n        this.clear();\n      } catch (error) {\n        return false;\n      } finally {\n        loading.close();\n      }\n      return true;\n    },\n    handleSearch(item) {\n      Object.assign(this.consigneeSelected, item);\n      this.haveDaysOfService = this.consigneeSelected.daysOfService.monday || this.consigneeSelected.daysOfService.tuesday || this.consigneeSelected.daysOfService.wednesday || this.consigneeSelected.daysOfService.thursday || this.consigneeSelected.daysOfService.friday || this.consigneeSelected.daysOfService.saturday || this.consigneeSelected.daysOfService.sunday;\n      this.clearAutocomplete();\n    },\n    clear() {\n      this.consigneeSelected = {};\n      this.clearAutocomplete();\n      this.$refs['add-consignee-autocomplete'].$el.getElementsByTagName('input')[0].focus();\n    },\n    clearAutocomplete() {\n      this.consigneeAccountId = null;\n      this.$refs['add-consignee-autocomplete'].clearLocalModel();\n    }\n  }\n};\n</script>\n<style rel=\"stylesheet/scss\" lang=\"scss\">\n#btn-open-dialog-add-consignee-shipper {\n  margin-left: 10px;\n}\n#add-consignee-search-button {\n  float: right;\n}\n#btn-clear-consignee-info {\n  margin-right: 20px;\n}\n#add-consignee-shipper-div {\n  padding-right: 20px;\n  padding-left: 20px;\n  .consignee-account-info {\n    margin-top: 20px;\n  }\n  .consignee-days-of-service-info {\n    margin-top: 20px;\n    margin-bottom: 12px;\n    .consignee-days-of-service-table {\n      th {\n        text-align: center;\n        font-size: 14px;\n        padding-top: 5px;\n        padding-bottom: 5px;\n      }\n      td {\n        font-weight: bold;\n        border-left: 2px solid #fafffa;\n        text-align: center;\n        text-transform: uppercase;\n        padding-top: 5px;\n        padding-bottom: 5px;\n        &:first-of-type {\n          border-left: none;\n        }\n      }\n      .enabled-day {\n        color: #008D00;\n        background-color: rgba(0, 141, 0, 0.15);\n      }\n      .disabled-day {\n        color: #9b9b9b;\n        background-color: #EFEFEF;\n      }\n    }\n  }\n}\n.explanation-add-shipper-consignee{\n        margin-top: -18px;\n        margin-bottom: 17px;\n        color: #838181;\n}\n</style>\n"]}]}