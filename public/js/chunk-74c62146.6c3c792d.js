(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74c62146"],{3582:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"shipper-container"},[a("div",{staticClass:"shipper-group"},[a("transition",{attrs:{name:"slide"}},[e.show?a("div",{staticClass:"shipper-list"},[a("div",{staticClass:"title"},[e._v("\n                    "+e._s(e.$t("shipperComponent.shipperList"))+"\n                ")]),a("div",{staticClass:"search-shippers-div"},[a("el-input",{directives:[{name:"alphanumeric-validation",rawName:"v-alphanumeric-validation"}],ref:"search-shipper-list",staticClass:"inline-input",attrs:{maxlength:"50",clearable:"",size:"mini","suffix-icon":"el-icon-search",id:"search-shipper-list"},on:{change:e.search},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1),a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.search,expression:"search"}],staticClass:"list",attrs:{"infinite-scroll-immediate":"","infinite-scroll-distance":"100","infinite-scroll-disabled":"disabled"}},e._l(e.shippers.list,function(t){return a("div",{key:t.id,staticClass:"list-item"},[a("span",{staticClass:"span-check"},[a("el-radio",{attrs:{label:t.number},on:{change:function(s){return e.change(t)}},model:{value:e.user.shipperAccountNumber,callback:function(t){e.$set(e.user,"shipperAccountNumber",t)},expression:"user.shipperAccountNumber"}},[e._v("\n                                 \n                            ")])],1),a("span",{staticClass:"span-name"},[e._v("\n                            "+e._s(t.name)+" - "+e._s(t.number)+"\n                        ")])])}),0),e.shippers.loading?a("p",{staticClass:"loading-shippers"},[a("img",{attrs:{src:s("e96b"),alt:"loading"}})]):e._e(),e.noMore||e.shippers.loading?e._e():a("p",{staticClass:"scroll-ellipsis"},[e._v(" ... ")])]):e._e()]),a("div",{staticClass:"shipper-selected"},[a("span",{staticClass:"shipper-label"},[e._v(" "+e._s(e.user.shipperAccountLabel)+" ")]),a("span",{staticClass:"shipper-change"},[e.shippers.multipleShippers&&e.user.shipperAccountNumber?a("el-button",{attrs:{icon:"fa fa-random",size:"mini",circle:""},on:{click:e.openList}}):e._e()],1)])],1),e.show?a("div",{staticClass:"shipper-container-overlay"}):e._e()])},i=[],n=(s("8e6e"),s("456d"),s("ac4d"),s("8a81"),s("ac6a"),s("96cf"),s("3b8d")),r=(s("386d"),s("bd86")),l=s("5c96"),o=s("2f62"),c=s("c9d9");function p(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?p(s,!0).forEach(function(t){Object(r["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):p(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var d={name:"shipperList",props:{actionStrSelectChained:{type:Array,default:null}},data:function(){return{show:!1,searchText:""}},computed:u({},Object(o["b"])(["shippers","user","orderEntry"]),{noMore:function(){return this.shippers.list.length>=this.shippers.totalRows},disabled:function(){return this.shippers.loading||this.noMore}}),methods:{search:function(e){return(this.searchText!==this.shippers.filters.search||e)&&this.$store.dispatch("account/resetShipperList"),this.$store.dispatch("account/getShipperListScroll",this.searchText)},change:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.dispatch("setUserShipperAccount",t),s=l["Loading"].service(c["a"].LOADING.DEFAULT_CONFIG),e.next=4,this.callSelectAction();case 4:s.close(),this.show=!1;case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),openList:function(){var e=this;this.show=!this.show,this.show&&this.$nextTick(function(){e.$refs["search-shipper-list"].focus()})},callSelectAction:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,s,a,i,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.actionStrSelectChained){e.next=27;break}t=!0,s=!1,a=void 0,e.prev=4,i=this.actionStrSelectChained[Symbol.iterator]();case 6:if(t=(n=i.next()).done){e.next=13;break}return r=n.value,e.next=10,this.$store.dispatch(r);case 10:t=!0,e.next=6;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](4),s=!0,a=e.t0;case 19:e.prev=19,e.prev=20,t||null==i.return||i.return();case 22:if(e.prev=22,!s){e.next=25;break}throw a;case 25:return e.finish(22);case 26:return e.finish(19);case 27:case"end":return e.stop()}},e,this,[[4,15,19,27],[20,,22,26]])}));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,s,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=!0,!this.user.shipperAccountNumber){e.next=6;break}this.callSelectAction(),this.search(t),e.next=12;break;case 6:return s=l["Loading"].service(c["a"].LOADING.DEFAULT_CONFIG),e.next=9,this.search(t);case 9:this.show=this.shippers.list&&this.shippers.list.length>1,this.shippers.list&&1===this.shippers.list.length&&this.change(this.shippers.list[0]),s.close();case 12:this.show&&this.$nextTick(function(){a.$refs["search-shipper-list"].focus()});case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},h=d,m=(s("f257"),s("2877")),f=Object(m["a"])(h,a,i,!1,null,null,null);t["a"]=f.exports},"7a5d":function(e,t,s){e.exports=s.p+"img/upload-icon.0b5ac41c.png"},8284:function(e,t,s){"use strict";var a=s("8f56"),i=s.n(a);i.a},"8f56":function(e,t,s){},9014:function(e,t,s){"use strict";var a=s("956c"),i=s.n(a);i.a},9063:function(e,t,s){"use strict";var a=s("95cb"),i=s.n(a);i.a},"956c":function(e,t,s){},"95cb":function(e,t,s){},dfa8:function(e,t,s){},e96b:function(e,t,s){e.exports=s.p+"img/loading.c5590569.svg"},ecea:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("shipper-list"),s("div",{staticClass:"app-view-container upload-container"},[s("div",{staticClass:"app-view-title"},[e._v(e._s(e.$t("uploadXmlFiles.uploadShipmentTitle"))+"\n    "),s("el-popover",{staticClass:"explanation-popover",attrs:{placement:"bottom",title:e.$t("uploadXmlFiles.explanation"),width:"200",trigger:"click",content:e.$t("uploadXmlFiles.explanationText")}},[s("i",{staticClass:"el-icon-question",attrs:{slot:"reference"},slot:"reference"})])],1),s("el-collapse",{staticClass:"explanation-container",model:{value:e.activeCollapsibleName,callback:function(t){e.activeCollapsibleName=t},expression:"activeCollapsibleName"}},[s("el-collapse-item",{attrs:{title:e.$t("uploadXmlFiles.explanation"),name:"explanation",id:"explanation"}},[s("div",[e._v(e._s(e.$t("uploadXmlFiles.explanationText")))])])],1),s("upload-response",{staticClass:"upload-response"})],1),s("upload-drop")],1)},i=[],n=s("3582"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload-drop-container",class:{"upload-drop-container-mini":e.isMinimized,"upload-drop-container-max":!e.isMinimized}},[a("div",{staticClass:"upload-template-info"},[a("i",{staticClass:"el-icon-info red-armellini"}),e._v(" \n    "),a("span",{staticClass:"font-gray info-text"},[e._v(" "+e._s(e.$t("uploadXmlFiles.youCanDownload"))+"  ")]),a("a",{staticClass:"red-link-bold",attrs:{id:"xml-upload-download-template-link",href:e.templateExampleUrl,download:""}},[e._v(" "+e._s(e.$t("uploadXmlFiles.here"))+" ")])]),e.processing?a("span",{staticClass:"xml-loading",attrs:{id:"xml-loading"}},[a("img",{class:{"padding-left_28":e.actualFileProcessed},attrs:{src:s("e96b"),alt:"loading"}})]):e._e(),a("div",{staticClass:"upload-dropzone-area",class:{"upload-dropzone-area-mini":e.isMinimized,"upload-dropzone-area-max":!e.isMinimized},on:{click:e.handleOpenSearchFile}},[e.actualFileProcessed?a("i",{staticClass:"collapse-drop-zone el-icon-arrow-right",attrs:{id:"collapse-drop-zone"},on:{click:function(t){return t.stopPropagation(),e.handleMinimized(t)}}}):e._e(),a("el-upload",{ref:"upload",staticClass:"upload-xml",attrs:{id:"upload-xml",drag:"","show-file-list":!1,action:e.url,headers:{shipperAccountNumber:e.user.shipperAccountNumber,Authorization:e.authorization},"on-success":e.handleSuccess,"on-progress":e.handleProgress,"on-error":e.handleError,"before-upload":e.handleBeforeUpload,limit:1,accept:".xml"}},[a("div",{staticClass:"upload-icon-container"},[a("img",{staticClass:"upload-icon",attrs:{src:s("7a5d"),alt:"upload-icon"}}),e.isMinimized?e._e():a("el-progress",{attrs:{type:"circle",percentage:e.uploadProgress,"show-text":!1}})],1),a("div",{staticClass:"el-upload__text"},[a("div",{staticClass:"drag-and-drop-text"},[e._v(" "+e._s(e.$t("uploadXmlFiles.dragAndDrop"))+" ")]),e._v(" "+e._s(e.$t("uploadXmlFiles.yourFilesOr"))+" "),a("em",[e._v(e._s(e.$t("uploadXmlFiles.browse")))])])])],1)])},l=[],o=(s("8e6e"),s("ac6a"),s("456d"),s("7f7f"),s("bd86")),c=s("2f62"),p=s("4436");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(s,!0).forEach(function(t){Object(o["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var h={name:"UploadDrop",computed:d({},Object(c["b"])(["user"])),data:function(){return{isMinimized:!1,uploadProgress:0,processing:!1,actualFileProcessed:!1,url:"",templateExampleUrl:"",authorization:null}},mounted:function(){this.url="".concat("https://a4test.api.armellini.com/api","/data-entry/shipment/upload"),this.templateExampleUrl="".concat("https://s3.amazonaws.com/aelis4-assets-dev/","xml-upload-template.xml"),this.authorization="Bearer ".concat(p["a"].accessToken)},methods:{handleSuccess:function(e,t){this.$store.dispatch("SetUploadXmlResponse",d({},e,{fileName:t.name})),this.isMinimized=!0,this.processing=!1,this.actualFileProcessed=!0,this.$refs.upload.clearFiles()},handleOpenSearchFile:function(){this.isMinimized=!1,this.uploadProgress=0},handleMinimized:function(){this.isMinimized=!this.isMinimized},handleProgress:function(e,t,s){this.processing||(this.processing=!0),this.uploadProgress=s[0].percentage},handleError:function(e){this.processing=!1;var t=JSON.parse(e.message);this.$message.error(t.message||this.$t("common.errorServer"))},handleBeforeUpload:function(e){var t="text/xml"===e.type,s=e.size/1024/1024<=5;return t||this.$message.error(this.$t("uploadXmlFiles.errorExtension")),s||this.$message.error(this.$t("uploadXmlFiles.fileSizeExceed")),t&&s}}},m=h,f=(s("9063"),s("2877")),v=Object(f["a"])(m,r,l,!1,null,null,null),b=v.exports,g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-collapse",{directives:[{name:"show",rawName:"v-show",value:e.uploadXmlResponse.details.length||e.uploadXmlResponse.header.errorMessage||e.uploadXmlResponse.header.fileName,expression:"uploadXmlResponse.details.length || uploadXmlResponse.header.errorMessage || uploadXmlResponse.header.fileName"}],model:{value:e.uploadXmlResponse.activeElement,callback:function(t){e.$set(e.uploadXmlResponse,"activeElement",t)},expression:"uploadXmlResponse.activeElement"}},[s("el-collapse-item",{attrs:{title:e.$t("uploadXmlFiles.xmlResponse"),name:"xml-upload-response-collapsible",id:"xml-upload-response-collapsible"}},[s("div",{staticClass:"header-response",attrs:{id:"header-response"}},[s("span",{staticClass:"response-field"},[e._v(e._s(e.$t("common.orderNumberShort"))+": "+e._s(e.uploadXmlResponse.header.orderNumber))]),s("span",{staticClass:"response-field"},[e._v(e._s(e.$t("common.shipdate"))+": "+e._s(e.uploadXmlResponse.header.shipdate))]),s("span",{staticClass:"response-field"},[e._v(e._s(e.$t("common.shipper"))+": "+e._s(e.uploadXmlResponse.header.shipper))]),s("span",{staticClass:"response-field"},[e._v(e._s(e.$t("common.unitsInFile"))+": "+e._s(e.uploadXmlResponse.header.totalUnitsInFile))]),s("span",{staticClass:"response-field"},[e._v(e._s(e.$t("common.unitsSuccess"))+": "+e._s(e.uploadXmlResponse.header.totalUnitsSuccess))]),s("span",{staticClass:"response-field"},[e._v(e._s(e.$t("common.unitsDuplicates"))+": "+e._s(e.uploadXmlResponse.header.totalUnitsDuplicates))]),s("span",{staticClass:"response-field"},[e._v(e._s(e.$t("common.unitsDiscrepancy"))+": "+e._s(e.uploadXmlResponse.header.totalUnitsDiscrepancy))])]),s("div",{staticClass:"header-response-message",attrs:{id:"header-response-message"}},[e.uploadXmlResponse.header.errorMessage?s("div",[s("i",{staticClass:"el-icon-warning yellow-warning"}),e._v("   "),s("span",[e._v(e._s(e.uploadXmlResponse.header.errorMessage))])]):e._e(),e.uploadXmlResponse.details.length||e.uploadXmlResponse.header.errorMessage||!e.uploadXmlResponse.header.fileName?e._e():s("div",[s("i",{staticClass:"el-icon-success green-success"}),e._v(" "),s("span",[e._v(e._s(e.$t("uploadXmlFiles.uploadSuccess")))])])]),s("div",{staticClass:"xml-table-response-data-container"},[e.uploadXmlResponse.details.length?s("el-table",{staticClass:"xml-table-response-data",attrs:{id:"response-data",size:"mini","tooltip-effect":"dark",sortable:"",data:e.uploadXmlResponse.details}},[s("el-table-column",{attrs:{prop:"consignee",width:"270",label:e.$t("common.consigneeAccount")},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(" "+e._s(t.row.consignee_name)+" - "+e._s(t.row.consignee))])]}}],null,!1,423175605)}),s("el-table-column",{attrs:{prop:"unitsFailed",width:"100",label:e.$t("uploadXmlFiles.failedUnits")}}),s("el-table-column",{attrs:{prop:"unitFailedDetail.unitID[0]",width:"120",label:e.$t("uploadXmlFiles.unitIds")},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.unitFailedDetail.unitID.length?s("span",[e._v(e._s(t.row.unitFailedDetail.unitID[0]))]):[s("el-popover",{attrs:{placement:"right",width:"100",trigger:"hover"}},[s("el-table",{attrs:{data:t.row.unitFailedDetail.unitID,"max-height":"500"}},[s("el-table-column",{attrs:{width:"300",label:e.$t("uploadXmlFiles.unitIds")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                                            "+e._s(t.row)+"\n                                        ")]}}],null,!0)})],1),s("el-button",{staticClass:"pop-over-unitIds-error",attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v(e._s(t.row.unitFailedDetail.unitID[0])+"...")])],1)]]}}],null,!1,1347237816)}),s("el-table-column",{attrs:{prop:"message",label:e.$t("common.message")}})],1):e._e()],1)])],1)],1)},_=[];function w(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function x(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?w(s,!0).forEach(function(t){Object(o["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):w(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var O={name:"UploadResponse",computed:x({},Object(c["b"])(["uploadXmlResponse"])),data:function(){return{}},beforeDestroy:function(){this.$store.dispatch("clearXmlResponse")}},C=O,y=(s("8284"),Object(f["a"])(C,g,_,!1,null,null,null)),$=y.exports,X={name:"UploadXml",components:{UploadDrop:b,UploadResponse:$,ShipperList:n["a"]},data:function(){return{activeCollapsibleName:["explanation"]}}},j=X,S=(s("9014"),Object(f["a"])(j,a,i,!1,null,null,null));t["default"]=S.exports},f257:function(e,t,s){"use strict";var a=s("dfa8"),i=s.n(a);i.a}}]);
//# sourceMappingURL=chunk-74c62146.6c3c792d.js.map